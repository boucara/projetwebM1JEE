/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package utilisateurs.gestionnaires;

import java.util.Base64;
import java.util.Collection;
import java.util.Date;
import javax.annotation.PostConstruct;
import javax.ejb.Singleton;
import javax.ejb.Startup;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;
import utilisateurs.modeles.Event;

/**
 *
 * @author user
 */
@Startup
@Singleton
public class GestionnaireEvent {
    @PersistenceContext  
    private EntityManager em;
    
    @PostConstruct
    public void init() {
        String img = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABICAYAAAAJZ/BjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAACVMSURBVHheXdx1zyXF08bx2fvAD3d3t2Vx12WR4ISQEEh4J5CQE94Fb4C/+AcN7u7uuri7yz7n0+G7ufN0MsxMd3XVVVdVV8/MfZYV11133bpff/112mabbaZ169ZNX3/99bTttttOG2644fTVV19Nf/755xj7/fffp6Wlpenvv/+eZrPZtMkmm0wfffTRtPvuu0+bb7759OOPP04rVqwY47/99tu00047Td9999302WefTfvss8/05ZdfTttvv/0Y22qrrab33ntv2nfffacffvhh2mijjYbNDTbYYIKF3c0222zYcWy99dZDLxuwaOT+/fffgfOPP/6YNt5443HNB/fG4P3nn3/GtT46fvrpp4Fdvzmww9081+bBYp57Z/Lmk3/nnXemJ554YjrvvPOGLG70f/HFF9PLL7887bHHHsP3t956a/r555+nHXbYYdpyyy2nv/76a4zRTfaMM86YlijmJCUOg+7/97//jbNJ+hjKWXPcA0bm+++/H4Yi35yPP/546Ntrr72GPICIRianDjnkkOG0oHz++edjvmAgiA3HpptuOubQRzfZX375ZSRF5IaLrvCxxTY79Jlr7NNPPx3BN3/XXXcdATUv/WQcdJrLNzbI8BUP+bLddttNN9xww/p7MgL64YcfTvfff//Qs2rVqumYY44ZyccXSfftt9+OOaeddtqQn5188slzijnKOcQDwAHAXBtDLEPuKQOYItnEIYDpkZnmIjMdnEYwg+TMc6ZLkyHGWxlbbLHFcN5BR0TQlQ76rRIkwqyfrD5BgNc8Z/hckyODfIRKBr78f/18KDBhxIFr8wT1hRdeGATfe++9Y8UeeOCBQ37lypWDk2effXZUkx133HHabbfdxnx+sb3ffvutT/TZIhJzIICUIYwjgjGZaRKDSgRnAQAOaWTK1pwHhmLBkgUCxXH66UB0juhnT595wO2yyy7DHoLZMB8ugNmnm4OIpR9WMoLSYYxP5sBKRklAAp36zaGLLfeId5BvJbjWXPORXaSG/YEHHhjlFWYrQrllQ2k9/PDDB3ePPfbY8F2ptjr4yH/28bVEkQ7HnnvuOR188MGjpCBUhohqZQNg97IFaeSABAjhlpd7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";
        insertEvent("ultricies adipiscing, enim mi tempor", "eu nulla at sem molestie sodales. Mauris blandit enim consequat purus. Maecenas libero est, congue a, aliquet vel, vulputate eu, odio. Phasellus at augue id ante dictum cursus. Nunc mauris", Base64.getEncoder().encode(img.getBytes()));
        insertEvent("elit. Curabitur sed tortor. Integer", "et malesuada fames ac turpis egestas. Fusce aliquet magna a neque. Nullam ut nisi a odio semper cursus. Integer mollis. Integer tincidunt aliquam arcu. Aliquam ultrices iaculis odio. Nam interdum", Base64.getEncoder().encode(img.getBytes()));
        insertEvent("ultricies adipiscing, enim mi tempor", "lobortis quam a felis ullamcorper viverra. Maecenas iaculis aliquet diam. Sed diam lorem, auctor quis, tristique ac, eleifend vitae, erat. Vivamus nisi. Mauris nulla. Integer urna. Vivamus molestie dapibus ligula.", Base64.getEncoder().encode(img.getBytes()));
        insertEvent("elit. Curabitur sed tortor. Integer", "eu nulla at sem molestie sodales. Mauris blandit enim consequat purus. Maecenas libero est, congue a, aliquet vel, vulputate eu, odio. Phasellus at augue id ante dictum cursus. Nunc mauris", Base64.getEncoder().encode(img.getBytes()));
        insertEvent("ultricies adipiscing, enim mi tempor", "lobortis quam a felis ullamcorper viverra. Maecenas iaculis aliquet diam. Sed diam lorem, auctor quis, tristique ac, eleifend vitae, erat. Vivamus nisi. Mauris nulla. Integer urna. Vivamus molestie dapibus ligula.", Base64.getEncoder().encode(img.getBytes()));
    }

    private Event creerEvent(String nom, String description, byte[] photo) {
        Date datePublication = new Date();
        Event e = new Event(nom, description, datePublication, photo);
        return e;
    }
    
    public void insertEvent(String nom, String description, byte[] photo){
        Event e = creerEvent(nom, description, photo);
        em.persist(e);
    }
    
    public Collection<Event> selectEvents(int pagination){
        Query q = em.createQuery("select e from Event e ");
        q.setFirstResult(pagination);
        q.setMaxResults(3);
        Collection<Event> collection = q.getResultList();
        for(Event e : collection){
            e.setUrlphoto(new String(Base64.getDecoder().decode(e.getPhoto())));
        }
        return collection;
    }
}
